<object th:include="fragments/custFragment  ::  all" th:remove="tag"></object>

<br>
<br>

      <!-- Page Content  -->
      <div id="content" class="p-4 p-md-5 pt-5">
        <div class="container-fluid">
            <br>
            <div class="row justify-content-center">

                <div class="col-md-9">
                    <br>
                    <div class = "card">
                        <div class = "card-header">
                            <h2 class="mb-4">Account</h2>
                        </div>
                        <div class = "card-body">
                            <table class="table" style="width:70%">
                                <tbody>
                                    <tr>
                                        <th style="width: 300px;">Nama </th>
                                        <td th:text="${user.username}"></td>
                                    </tr>
                                    <tr>
                                        <th>Role </th>
                                        <td th:text="${user.role.nama}"></td>
                                    </tr>
                                    <tr>
                                </tbody>
                            </table>           
                        </div>
                    </div>
                </div>
                

                <div class="col-md-9" th:if="${user.role.nama} == 'CUSTOMER'">
                    <br><br>
                    <div class = "card" th:if="${user.userPersonal} != null">
                        <div class = "card-header">
                            <h2 class="mb-4">Personal</h2>
                        </div>
                        <div class = "card-body">
                            <table class="table" style="width:70%">
                                <tbody>
                                    <tr>
                                        <th style="width: 300px;">Nama </th>
                                        <td th:text="${user.userPersonal.namaLengkap}"></td>
                                    </tr>
                                    <tr>
                                        <th>Tanggal Lahir </th>
                                        <td th:text="${user.userPersonal.tanggalLahir}"></td>
                                    </tr>
                                    <tr>
                                        <th>Tempat Lahir </th>
                                        <td th:text="${user.userPersonal.tempatLahir}"></td>
                                    </tr>
                                    <tr>
                                        <th>Alamat </th>
                                        <td th:text="${user.userPersonal.alamat}"></td>
                                    </tr>
                                    <tr>
                                </tbody>
                            </table>           
                        </div>
                    </div>
                </div>

                <div class="col-md-9" th:if="${user.role.nama} == 'CUSTOMER'">
                    <br><br>
                    <div class = "card" th:if="${user.userIdentity} != null">
                        <div class = "card-header">
                            <h2 class="mb-4">Dokumen Identitas</h2>
                        </div>
                        <div class = "card-body">
                            <table class="table" style="width:70%">
                                <tbody>
                                    <tr>
                                        <th style="width: 300px;">KTP </th>
                                        <td><a href="/" th:text="${user.userIdentity.ktp}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>KK </th>
                                        <td><a href="/"th:text="${user.userIdentity.kk}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>NPWP </th>
                                        <td><a href="/"th:text="${user.userIdentity.npwp}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>BPKB </th>
                                        <td><a href="/"th:text="${user.userIdentity.bpkb}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>BKR </th>
                                        <td><a href="/"th:text="${user.userIdentity.bkr}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>STNK </th>
                                        <td><a href="/"th:text="${user.userIdentity.stnk}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>Fraktur </th>
                                        <td><a href="/"th:text="${user.userIdentity.fraktur}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>Rancangan Anggaran </th>
                                        <td><a href="/"th:text="${user.userIdentity.rancanganAnggaran}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>KK </th>
                                        <td><a href="/"th:text="${user.userIdentity.rekeningKoran}"></a></td>
                                    </tr>
                                    <tr>
                                        <th>KK </th>
                                        <td><a href="/"th:text="${user.userIdentity.rekeningMandiri}"></a></td>
                                    </tr>
                                </tbody>
                            </table>           
                        </div>
                    </div>
                </div>

                <div class="col-md-9" th:if="${user.role.nama} == 'CUSTOMER' AND ${user.kredit} != null">
                    <br><br>
                    <div class = "card">
                        <div class = "card-header">
                            <h2 class="mb-4">Data Kredit</h2>
                        </div>
                        <div class = "card-body">
                            <table class="table" style="width:70%">
                                <tbody>
                                    <tr>
                                        <th style="width: 300px;">Nominal Kredit </th>
                                        <td th:text="${user.kredit.nominal}"></td>
                                    </tr>
                                    <tr>
                                        <th>Waktu peminjaman (tenor)</th>
                                        <td th:text="${user.kredit.apr.tenor}"></td>
                                    </tr>
                                    <tr>
                                        <th>Angsuran per Bulan </th>
                                        <td th:text="${user.kredit.angsuran.nominal}"></td>
                                    </tr>
                                    <tr>
                                        <th>Status </th>
                                        <td th:text="${user.kredit.status}"></td>
                                    </tr>
                                </tbody>
                            </table>  
                            <br>         
                        </div>
                    </div>
                    <div class="container-bar" th:if = "${user.kredit.status} == 'Under Review'">
                        <ul class="progressbar">
                            <div>
                                <li class="active">Credit Application Sent</li>
                                <li>In Review</li>
                                <li>Survey</li>
    
                            </div>
                        </ul>
                    </div>
                    <div class="container-bar" th:if = "${user.kredit.status} == 'Survey'">
                        <ul class="progressbar">
                            <div>
                                <li class="active">Credit Application Sent</li>
                                <li class="active">In Review</li>
                                <li>Survey</li>
                            </div>
                        </ul>
                    </div>
                    <div class="container-bar" th:if = "${user.kredit.status} == 'Approved'">
                        <ul class="progressbar">
                            <div>
                                <li class="active">Credit Application Sent</li>
                                <li class="active">In Review</li>
                                <li class="active">Survey Approved</li>
                            </div>
                        </ul>
                    </div>
    
                </div>
               

            </div>
        </div>
      </div>
    </div>


<br>
<br>

<style>
.container-bar {
    width: 800px;
    margin: 100px auto; 
    font-size: large;
}
.progressbar {
    counter-reset: step;
}
.progressbar li {
    list-style-type: none;
    width: 33%;
    float: left;
    font-size: 12px;
    position: relative;
    text-align: center;
    color: #7d7d7d;
}
.progressbar li:before {
    width: 30px;
    height: 30px;
    content: counter(step);
    counter-increment: step;
    line-height: 30px;
    border: 2px solid #7d7d7d;
    display: block;
    text-align: center;
    margin: 0 auto 10px auto;
    border-radius: 50%;
    background-color: white;
}
.progressbar li:after {
    width: 100%;
    height: 2px;
    content: '';
    position: absolute;
    background-color: #7d7d7d;
    top: 15px;
    left: -50%;
    z-index: -1;
}
.progressbar li:first-child:after {
    content: none;
}
.progressbar li.active {
    color: green;
}
.progressbar li.active:before {
    border-color: #55b776;
}
.progressbar li.active + li:after {
    background-color: #55b776;
}
</style>